# https证书固定
### 1.概述
在公共网络中我们使用安全的SSL/TLS通信协议进行通信，并且使用数字证书来提供加密和认证。HTTPS的握手环节仍然面临（MIM中间人）攻击的可能性，因此CA证书签发机构也存在被黑客入侵的可能性，同时移动设备也面临内置证书被篡改的风险。

### 2.证书锁定原理
证书锁定（SSL/TLS Pinning）提供了两种锁定方式：

Certificate Pinning，证书锁定
Public Key Pinning，公钥锁定
- 2.1 证书锁定
具体操作：将APP代码内置仅接受指定域名的证书，而不接受操作系统或者浏览器内置的CA根证书对应的任何证书。通过这种授权方式，保障了APP与服务端通信的唯一性和安全性，因此移动端APP与服务端（例如API网关）之间的通信可以保证绝对的安全。

缺点：CA签发证书存在有效期问题，在证书续期后需要将证书重新内置到APP内。

- 2.2 公钥锁定
具体做法：公钥锁定是提前证书中的公钥并内置到移动端APP内，通过与服务器对比公钥值来验证连接的合法性。
优点：在制作证书密钥时，公钥在证书续期前后可以保持不变（即密钥对不变），所以可以避免证书有效期问题。